<html xmlns:py="http://genshi.edgewall.org/"
  xmlns:xi="http://www.w3.org/2001/XInclude">
  
  <py:def function="page_title">Home</py:def>

  <style type="text/css" py:def="page_specific_css">
      form {
        margin-top: 1em;
      }

      #main h2 {
        margin-top: 1.2em;
      }
  </style>

  <py:match path="primarysidebar">
  </py:match>

  <div py:match="content">
    <p style="margin-top: 0.75em;"><strong>${c.package_count} registered packages</strong> available.</p>

    <xi:include href="package/search_form.html" />

    <h2>Register</h2>

    <form action="${h.url_for(controller='package', action='new', id=None)}" method="POST">
      ${XML(h.text('title', size=40, value=''))}
      ${XML(h.submit('', 'Register a New Package &raquo;'))}
      <p class="desc">Enter title or short description</p>
    </form>

      <h2>Recently Changed</h2>
      <p py:for="rev in c.revisions">
        <py:for each="pkg in rev.packages">
        <a href="${h.url_for(controller='package', action='read', id=pkg.name)}">${pkg.name}</a>
        </py:for>
        <strong>@</strong> ${rev.timestamp.replace(microsecond=0)}
        <strong>by</strong> ${rev.author}
      </p>
      <p><a href="${h.url_for(controller='revision', action='index', id=None)}">More ...</a></p>

	</div>

  <xi:include href="layout.html" />
</html>
